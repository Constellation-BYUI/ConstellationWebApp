@model ConstellationWebApp.Models.Posting
@using System.Security.Claims;

@{
    ViewData["Title"] = "Postings Create";
    var currentUser = this.User.FindFirstValue(ClaimTypes.NameIdentifier);
}

<h1>Create</h1>
<!-- #region Info button:
   Note from Ryan: I could not figure out how to keep this working
   when i put the css and javascript in seperate files.
   I am going to leave this as it is for now so we can place these info blips in all locations needed-->
<style>
    .show-info {
        opacity: 1;
    }

    p {
        padding: 1em;
        opacity: 0;
        transition: opacity 0.5s linear;
        background-color: lightgoldenrodyellow;
        font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
    }

    #hidden-info-blip {
        width: 1200px;
        z-index: 4;
        position: absolute;
    }

    #btn1 {
        border-radius: 100%;
    }
</style>

<button id="btn1"><i class="fa fa-info-circle" style="font-size:24px"></i></button>
<p id="hidden-info-blip">
    Creating a posting can be for recruiters or individuals who searching for someone to join their project.
    Below you can specify what kind of job that is available, it's description, the role or title, and the
    company or project that it is made for. Those who are interested will be given the ability to say so
    when they visit your posting details page. You will be able to add those who are interested on the
    <b><i>Posting Candidates page</i></b> to a <b><i>Pick's Pool</i></b>. This Picks Pool will be a great way
    to list those who you think are potential candidates. You can also add any user to this pool by visiting thier
    profile.
</p>

@* Scripts and resources for info button *@
<script type="text/javascript">
    var btn = document.getElementById('btn1')
    var p = document.getElementById('hidden-info-blip')
    btn.addEventListener('click', evt => {
        p.classList.toggle('show-info')
    })
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="/scripts/snippet-javascript-console.min.js?v=1"></script>
<!-- #endregion -->

<h4>Posting</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Create">

            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="PostingTitle" class="control-label"></label>
                <input asp-for="PostingTitle" class="form-control" />
                <span asp-validation-for="PostingTitle" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Description" class="control-label"></label>
                <input asp-for="Description" class="form-control" />
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PostingFor" class="control-label"></label>
                <input asp-for="PostingFor" class="form-control" />
                <span asp-validation-for="PostingFor" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="SharableToTeam" class="control-label">Allow projects, where you're a collaborator, to Link to this posting?</label>
                <div>
                    @Html.CheckBoxFor(m => m.SharableToTeam) Yes
                </div>
            </div>
            @* Need to say reasoning: Hold off on showing all people this posting, save it for later, or maybe reuse it next time you recuit for a similar posiiton*@
            <div class="form-group">
                <label asp-for="HidePosting" class="control-label">Do you want your Posting hidden to others?</label>
                <div>
                    @Html.CheckBoxFor(m => m.HidePosting) Yes
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <table>
                        <tr>
                            @{
                                int cnt = 0;
                                List<ConstellationWebApp.Models.AssignedTypeData> postingTypes = ViewBag.PostingTypes;

                                foreach (var postingType in postingTypes)
                                {
                                    if (cnt++ % 3 == 0)
                                    {
                                    @:</tr><tr>
                                    }
                                    @:<td>
                                        <input type="checkbox"
                                               name="selectedTypes"
                                               value="@postingType.PostingTypeID"
                                               @(Html.Raw(postingType.Assigned ? "checked=\"checked\"" : "")) />
                                        @:  @postingType.PostingTypeName
                                    @:</td>
                                }
                            @:</tr>
                            }
                        </table>
                    </div>
                </div>
                <div class="form-group">
                    <input type="submit" value="Create" class="btn btn-primary" />
                </div>
            </form>
        </div>
    </div>

    <div>
        <a asp-action="Index">Back to List</a>
    </div>

    @section Scripts {
        @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    }